<ion-header>
    <ion-toolbar>
        <ion-buttons left>
            <button ion-button icon-only *ngIf="modoEdicion" (click)="cancelEdit()">
                  <ion-icon name="close"></ion-icon>
            </button>
        </ion-buttons>

        <ion-title>Establos</ion-title>

        <ion-buttons right>
            <button ion-button icon-only *ngIf="!modoEdicion" (click)="edit()">
                <ion-icon name="create"></ion-icon>
            </button>
            <button ion-button icon-only *ngIf="modoEdicion" [disabled]="countEstablosForDelete() == 0" (click)="delete()">
                  <ion-icon name="trash"></ion-icon>
            </button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>

<ion-content>

    <ion-toolbar>
        <ion-segment [(ngModel)]="selectedTab" color="primary" (ionChange)="changeTab()">
            <ion-segment-button value="datos">
                DATOS
            </ion-segment-button>
            <ion-segment-button value="establos">
                ESTABLO(S)
            </ion-segment-button>
        </ion-segment>
    </ion-toolbar>

    <ion-grid>
        <ion-row>
            <ion-col col-12>
                <ion-searchbar (ionInput)="filter($event)" [autocomplete]="true" [placeholder]="'Filtrar establos'"></ion-searchbar>
            </ion-col>
            <ion-col col-12 *ngIf="modoEdicion">
                <button (click)="selectAll()" ion-button full>Seleccionar todos</button>
            </ion-col>
        </ion-row>
    </ion-grid>

    <ion-list no-lines *ngIf="establos">
        <ion-item *ngIf="!modoEdicion" (click)="newEstablo()">
            <ion-avatar item-left>
                <img src="assets/img/add.png">
            </ion-avatar>
            <h2>Crear establo</h2>
        </ion-item>

        <ion-item *ngFor="let e of establos" (click)="selectEstablo(e)">
            <ion-avatar item-left>
                <img src="assets/img/caballo.jpg">
            </ion-avatar>
            <h2>{{e.establo.Nombre}}</h2>
            <p>
                <ion-icon name="pin"></ion-icon> {{e.establo.Direccion}}
            </p>

            <ion-icon name="square" *ngIf="modoEdicion && !e.seleccion" item-right></ion-icon>
            <ion-icon name="checkbox" *ngIf="modoEdicion && e.seleccion" item-right></ion-icon>
        </ion-item>
    </ion-list>

</ion-content>