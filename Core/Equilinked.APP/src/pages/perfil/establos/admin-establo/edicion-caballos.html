<ion-header>
    <ion-toolbar>
        <ion-buttons left>
            <button ion-button icon-only *ngIf="!modoEdicion" (click)="goBack()">
                <ion-icon name="arrow-back"></ion-icon>
            </button>
            <button ion-button class="equi-toolbar-btn" *ngIf="modoEdicion" (click)="modoEdicion = !modoEdicion">
                  Cancelar 
            </button>
        </ion-buttons>

        <ion-title class="equi-toolbar-title-content">
            <span class="equi-toolbar-title">{{establo.Nombre}}</span>
            <br />
            <span class="equi-toolbar-subtitle">Caballos</span>
        </ion-title>

        <ion-buttons right>
            <button ion-button class="equi-toolbar-btn" *ngIf="!modoEdicion" (click)="edit()">
                Editar
            </button>
            <button ion-button class="equi-toolbar-btn" *ngIf="modoEdicion" (click)="save()">
                Aceptar
            </button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>

<ion-content>
    <div *ngIf="!modoEdicion">
        <ion-searchbar (ionInput)="filterCaballos($event)" [autocomplete]="true" [placeholder]="'Filtrar caballos'"></ion-searchbar>

        <ion-list no-lines>
            <ion-item *ngFor="let ec of establoCabllos" (click)="viewDetail(ec.Caballo)">
                <ion-avatar item-left>
                    <img src="assets/img/caballo.jpg">
                </ion-avatar>
                <h2>{{ec.Caballo.Nombre}}</h2>
                <p>{{ec.Caballo.Grupo ? c.caballo.Grupo.Descripcion : ''}}</p>
            </ion-item>
        </ion-list>
    </div>

    <div *ngIf="modoEdicion">
        <ion-grid>
            <ion-row>
                <ion-col col-12>
                    <ion-searchbar (ionInput)="filterCaballosForEdition($event)" [autocomplete]="true" [placeholder]="'Filtrar caballos'"></ion-searchbar>
                </ion-col>
                <ion-col col-12>
                    <button ion-button full (click)="selectAll()">Seleccionar todos</button>
                </ion-col>
            </ion-row>
        </ion-grid>

        <ion-list no-lines>
            <ion-item *ngFor="let ec of establoCaballosEdicion" (click)="ec.seleccion = !ec.seleccion">
                <ion-avatar item-left>
                    <img src="assets/img/caballo.jpg">
                </ion-avatar>
                <h2>{{ec.caballo.Nombre}}</h2>
                <p>{{ec.caballo.Grupo ? ec.caballo.Grupo.Descripcion : ''}}</p>
                <ion-icon *ngIf="ec.seleccion" name="remove-circle" item-right></ion-icon>
                <ion-icon *ngIf="!ec.seleccion" name="add-circle" item-right></ion-icon>
            </ion-item>
        </ion-list>
    </div>
</ion-content>