<ion-header>
    <ion-toolbar class="equi-toolbar">
        <ion-buttons left>
            <button class="equi-toolbar-btn" (click)="goBack()">Cancelar</button>
        </ion-buttons>

        <ion-buttons right>
            <button class="equi-toolbar-btn" [disabled]="!perfilForm.valid || (alerta.AlertaCaballo.length == 0 && alerta.AlertaGrupo.length == 0)"
                (click)="save()">Guardar</button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>

<ion-content>
    <form #perfilForm="ngForm">

        <!-- Cuando no hay nada seleccionado -->
        <ion-grid *ngIf="alerta.Tipo == null">
            <ion-row class="border-bottom">
                <ion-col>
                    <ion-select name="TipoAlerta" class="equi-input-normal-text equi-select-width" required="true" placeholder="Tipo de notificacion"
                        okText="Aceptar" cancelText="Cancelar" [(ngModel)]="alerta.Tipo" (ngModelChange)="changeTipoAlerta($event)">
                        <ion-option *ngFor="let tipoAlerta of tiposAlerta" [value]="tipoAlerta.tipo">{{tipoAlerta.descripcion}}</ion-option>
                    </ion-select>
                </ion-col>
            </ion-row>
        </ion-grid>

        <!-- Cuando eligen Dentista / Herrero / Dentista -->
        <ion-grid *ngIf="alerta.Tipo != null && (alerta.Tipo == 1 || alerta.Tipo == 2 || alerta.Tipo == 4)">
            <ion-row class="border-bottom" [hidden]="alerta.ID">
                <ion-col>
                    <ion-select name="TipoAlerta" class="equi-input-normal-text equi-select-width" required="true" placeholder="Tipo de notificacion"
                        okText="Aceptar" cancelText="Cancelar" [(ngModel)]="alerta.Tipo" (ngModelChange)="changeTipoAlerta($event)">
                        <ion-option *ngFor="let tipoAlerta of tiposAlerta" [value]="tipoAlerta.tipo">{{tipoAlerta.descripcion}}</ion-option>
                    </ion-select>
                </ion-col>
            </ion-row>

            <ion-row class="border-bottom">
                <ion-col col-2 class="col-center">
                    <ion-icon name="person" class="equi-icon-input"></ion-icon>
                </ion-col>
                <ion-col>
                    <ion-input style="padding-left: 5px;" name="NombreProfesional" class="equi-input-normal-text" type="text" placeholder="¿Quién?"
                        required="true" [(ngModel)]="alerta.NombreProfesional"></ion-input>
                </ion-col>
            </ion-row>

            <ion-row class="border-bottom">
                <ion-col col-2 class="col-center">
                    <ion-icon name="calendar" class="equi-icon-input"></ion-icon>
                </ion-col>
                <ion-col>
                    <ion-datetime name="FechaNotificacion" class="equi-input-normal-text" placeholder="Fecha" displayFormat="DD/MM/YYYY" pickerFormat="D MMMM YYYY"
                        cancelText="Cancelar" doneText="Aceptar" max="2050" [(ngModel)]="alerta.FechaNotificacion" required="true"></ion-datetime>
                </ion-col>
            </ion-row>

            <ion-row class="border-bottom">
                <ion-col col-2 class="col-center">
                    <ion-icon name="time" class="equi-icon-input"></ion-icon>
                </ion-col>
                <ion-col>
                    <ion-datetime name="HoraNotificacion" class="equi-input-normal-text" placeholder="Hora" displayFormat="h:mm A" pickerFormat="h mm A"
                        cancelText="Cancelar" doneText="Aceptar" [(ngModel)]="alerta.HoraNotificacion" required="true"></ion-datetime>
                </ion-col>
            </ion-row>

            <ion-row class="border-bottom">
                <ion-col col-2 class="col-center">
                    <ion-icon name="notifications" class="equi-icon-input"></ion-icon>
                </ion-col>
                <ion-col col-8 class="equi-col-center equi-input-normal-text">
                    <span *ngIf="alerta.AlertaRecordatorio.length > 0">&nbsp;&nbsp;&nbsp;&nbsp;{{alerta.AlertaRecordatorio[0].Descripcion}}&nbsp;antes</span>
                    <span *ngIf="alerta.AlertaRecordatorio.length == 0" class="equi-text-edit">&nbsp;&nbsp;&nbsp;&nbsp;Recordatorio</span>
                </ion-col>
                <ion-col col-2 class="col-center">
                    <ion-icon *ngIf="alerta.AlertaRecordatorio.length > 0" name="remove-circle" (click)="removeRecordatorio()" class="equi-icon-input equi-icon-delete"></ion-icon>
                    <ion-icon *ngIf="alerta.AlertaRecordatorio.length == 0" name="add-circle" (click)="viewRecordatorios()" class="equi-icon-input"></ion-icon>
                </ion-col>
            </ion-row>

            <ion-row class="border-bottom">
                <ion-col col-2 class="col-center">
                    <ion-icon name="ios-pricetag" class="equi-icon-input"></ion-icon>
                </ion-col>
                <ion-col col-8 class="equi-col-center equi-input-normal-text">
                    <span *ngIf="alerta.AlertaGrupo.length > 0">&nbsp;&nbsp;&nbsp;&nbsp;{{alerta.AlertaGrupo.length}} grupos(s)</span>
                    <span *ngIf="alerta.AlertaGrupo.length == 0" class="equi-text-edit">&nbsp;&nbsp;&nbsp;&nbsp;Etiquetar grupos(s)</span>
                </ion-col>
                <ion-col col-2 class="col-center">
                    <ion-icon name="add-circle" (click)="addGrupos()" class="equi-icon-input"></ion-icon>
                </ion-col>
            </ion-row>

            <ion-row class="border-bottom">
                <ion-col col-2 class="col-center">
                    <ion-icon name="ios-list-box" class="equi-icon-input"></ion-icon>
                </ion-col>
                <ion-col col-8 class="equi-col-center equi-input-normal-text">
                    <span *ngIf="alerta.AlertaCaballo.length > 0" class="equi-principal-color">&nbsp;&nbsp;&nbsp;&nbsp;{{alerta.AlertaCaballo.length}} caballo(s)</span>
                    <span *ngIf="alerta.AlertaCaballo.length == 0" class="equi-text-edit">&nbsp;&nbsp;&nbsp;&nbsp;Etiquetar caballo(s)</span>
                </ion-col>
                <ion-col col-2 class="col-center">
                    <ion-icon name="add-circle" (click)="addCaballos()" class="equi-icon-input"></ion-icon>
                </ion-col>
            </ion-row>

            <ion-row class="border-bottom">
                <ion-col col-2 class="col-center">
                    <ion-icon name="ios-pin" class="equi-icon-input"></ion-icon>
                </ion-col>
                <ion-col>
                    <ion-input style="padding-left: 5px;" name="Ubicacion" class="equi-input-normal-text" type="text" placeholder="Ubicación"
                        [(ngModel)]="alerta.Ubicacion"></ion-input>
                </ion-col>
            </ion-row>

            <ion-row class="border-bottom">
                <ion-col>
                    <ion-textarea name="Descripcion" class="equi-input-normal-text" autoresize rows="3" placeholder="Ingresar notas" [(ngModel)]="alerta.Descripcion"></ion-textarea>
                </ion-col>
            </ion-row>
        </ion-grid>

        <!-- Cuando eligen nota -->
        <ion-grid *ngIf="alerta.Tipo == 5">
            <ion-row class="border-bottom" [hidden]="alerta.ID">
                <ion-col>
                    <ion-select name="TipoAlerta" class="equi-input-normal-text equi-select-width" required="true" placeholder="Tipo de notificacion"
                        okText="Aceptar" cancelText="Cancelar" [(ngModel)]="alerta.Tipo" (ngModelChange)="changeTipoAlerta($event)">
                        <ion-option *ngFor="let tipoAlerta of tiposAlerta" [value]="tipoAlerta.tipo">{{tipoAlerta.descripcion}}</ion-option>
                    </ion-select>
                </ion-col>
            </ion-row>

            <ion-row class="border-bottom">
                <ion-col>
                    <ion-input name="Titulo" class="equi-input-title-note" type="text" placeholder="Título" required="true" [(ngModel)]="alerta.Titulo"></ion-input>
                </ion-col>
            </ion-row>

            <ion-row class="border-bottom">
                <ion-col>
                    <ion-textarea name="Descripcion" class="equi-input-normal-text" autoresize rows="3" placeholder="Notas" [(ngModel)]="alerta.Descripcion"></ion-textarea>
                </ion-col>
            </ion-row>

            <ion-row class="border-bottom">
                <ion-col col-2 class="col-center">
                    <ion-icon name="calendar" class="equi-icon-input"></ion-icon>
                </ion-col>
                <ion-col>
                    <ion-datetime name="FechaNotificacion" class="equi-input-normal-text" placeholder="Fecha" displayFormat="DD/MM/YYYY" pickerFormat="D MMMM YYYY"
                        cancelText="Cancelar" doneText="Aceptar" max="2050" [(ngModel)]="alerta.FechaNotificacion" required="true"></ion-datetime>
                </ion-col>
            </ion-row>

            <ion-row class="border-bottom">
                <ion-col col-2 class="col-center">
                    <ion-icon name="time" class="equi-icon-input"></ion-icon>
                </ion-col>
                <ion-col>
                    <ion-datetime name="HoraNotificacion" class="equi-input-normal-text" placeholder="Hora" displayFormat="h:mm A" pickerFormat="h mm A"
                        cancelText="Cancelar" doneText="Aceptar" [(ngModel)]="alerta.HoraNotificacion" required="true"></ion-datetime>
                </ion-col>
            </ion-row>

            <ion-row class="border-bottom">
                <ion-col col-2 class="col-center">
                    <ion-icon name="notifications" class="equi-icon-input"></ion-icon>
                </ion-col>
                <ion-col col-8 class="equi-col-center equi-input-normal-text">
                    <span *ngIf="alerta.AlertaRecordatorio.length > 0">&nbsp;&nbsp;&nbsp;&nbsp;{{alerta.AlertaRecordatorio[0].Descripcion}}&nbsp;antes</span>
                    <span *ngIf="alerta.AlertaRecordatorio.length == 0" class="equi-text-edit">&nbsp;&nbsp;&nbsp;&nbsp;Recordatorio</span>
                </ion-col>
                <ion-col col-2 class="col-center">
                    <ion-icon *ngIf="alerta.AlertaRecordatorio.length > 0" name="remove-circle" (click)="removeRecordatorio()" class="equi-icon-input equi-icon-delete"></ion-icon>
                    <ion-icon *ngIf="alerta.AlertaRecordatorio.length == 0" name="add-circle" (click)="viewRecordatorios()" class="equi-icon-input"></ion-icon>
                </ion-col>
            </ion-row>

            <ion-row class="border-bottom">
                <ion-col col-2 class="col-center">
                    <ion-icon name="ios-pricetag" class="equi-icon-input"></ion-icon>
                </ion-col>
                <ion-col col-8 class="equi-col-center equi-input-normal-text">
                    <span *ngIf="alerta.AlertaGrupo.length > 0">&nbsp;&nbsp;&nbsp;&nbsp;{{alerta.AlertaGrupo.length}} grupos(s)</span>
                    <span *ngIf="alerta.AlertaGrupo.length == 0" class="equi-text-edit">&nbsp;&nbsp;&nbsp;&nbsp;Etiquetar grupos(s)</span>
                </ion-col>
                <ion-col col-2 class="col-center">
                    <ion-icon name="add-circle" (click)="addGrupos()" class="equi-icon-input"></ion-icon>
                </ion-col>
            </ion-row>

            <ion-row class="border-bottom">
                <ion-col col-2 class="col-center">
                    <ion-icon name="ios-list-box" class="equi-icon-input"></ion-icon>
                </ion-col>
                <ion-col col-8 class="equi-col-center equi-input-normal-text">
                    <span *ngIf="alerta.AlertaCaballo.length > 0" class="equi-principal-color">&nbsp;&nbsp;&nbsp;&nbsp;{{alerta.AlertaCaballo.length}} caballo(s)</span>
                    <span *ngIf="alerta.AlertaCaballo.length == 0" class="equi-text-edit">&nbsp;&nbsp;&nbsp;&nbsp;Etiquetar caballo(s)</span>
                </ion-col>
                <ion-col col-2 class="col-center">
                    <ion-icon name="add-circle" (click)="addCaballos()" class="equi-icon-input"></ion-icon>
                </ion-col>
            </ion-row>
        </ion-grid>

        <!-- Cuando eligen evento -->
        <ion-grid *ngIf="alerta.Tipo == 3">
            <ion-row class="border-bottom" [hidden]="alerta.ID">
                <ion-col>
                    <ion-select name="TipoAlerta" class="equi-input-normal-text equi-select-width" required="true" placeholder="Tipo de notificacion"
                        okText="Aceptar" cancelText="Cancelar" [(ngModel)]="alerta.Tipo" (ngModelChange)="changeTipoAlerta($event)">
                        <ion-option *ngFor="let tipoAlerta of tiposAlerta" [value]="tipoAlerta.tipo">{{tipoAlerta.descripcion}}</ion-option>
                    </ion-select>
                </ion-col>
            </ion-row>

            <ion-row class="border-bottom">
                <ion-col>
                    <ion-input name="Titulo" class="equi-input-title-note" type="text" placeholder="Título" required="true" [(ngModel)]="alerta.Titulo"></ion-input>
                </ion-col>
            </ion-row>

            <ion-row class="border-bottom">
                <ion-col>
                    <ion-textarea name="Descripcion" class="equi-input-normal-text" autoresize rows="3" placeholder="Notas" [(ngModel)]="alerta.Descripcion"></ion-textarea>
                </ion-col>
            </ion-row>

            <ion-row class="border-bottom">
                <ion-col col-2 class="col-center">
                    <ion-icon name="calendar" class="equi-icon-input"></ion-icon>
                </ion-col>
                <ion-col col-5>
                    <ion-datetime name="FechaNotificacion" class="equi-input-normal-text" placeholder="Fecha de inicio" displayFormat="DD/MM/YYYY"
                        pickerFormat="D MMMM YYYY" cancelText="Cancelar" doneText="Aceptar" max="2050" [(ngModel)]="alerta.FechaNotificacion"
                        required="true"></ion-datetime>
                </ion-col>
                <ion-col col-5>
                    <ion-datetime name="FechaFin" class="equi-input-normal-text" placeholder="Fecha de finalización" displayFormat="DD/MM/YYYY"
                        pickerFormat="D MMMM YYYY" cancelText="Cancelar" doneText="Aceptar" max="2050" [(ngModel)]="alerta.FechaFinal"
                        required="true"></ion-datetime>
                </ion-col>
            </ion-row>

            <ion-row class="border-bottom">
                <ion-col col-2 class="col-center">
                    <ion-icon name="time" class="equi-icon-input"></ion-icon>
                </ion-col>
                <ion-col col-5>
                    <ion-datetime name="HoraNotificacion" class="equi-input-normal-text" placeholder="Hora de inicio" displayFormat="h:mm A"
                        pickerFormat="h mm A" cancelText="Cancelar" doneText="Aceptar" [(ngModel)]="alerta.HoraNotificacion"
                        required="true"></ion-datetime>
                </ion-col>
                <ion-col col-5>
                    <ion-datetime name="HoraFin" class="equi-input-normal-text" placeholder="Hora de finalización" displayFormat="h:mm A" pickerFormat="h mm A"
                        cancelText="Cancelar" doneText="Aceptar" [(ngModel)]="alerta.HoraFinal" required="true"></ion-datetime>
                </ion-col>
            </ion-row>

            <ion-row class="border-bottom">
                <ion-col col-2 class="col-center">
                    <ion-icon name="notifications" class="equi-icon-input"></ion-icon>
                </ion-col>
                <ion-col col-8 class="equi-col-center equi-input-normal-text">
                    <span *ngIf="alerta.AlertaRecordatorio.length > 0">&nbsp;&nbsp;&nbsp;&nbsp;{{alerta.AlertaRecordatorio[0].Descripcion}}&nbsp;antes</span>
                    <span *ngIf="alerta.AlertaRecordatorio.length == 0" class="equi-text-edit">&nbsp;&nbsp;&nbsp;&nbsp;Recordatorio</span>
                </ion-col>
                <ion-col col-2 class="col-center">
                    <ion-icon *ngIf="alerta.AlertaRecordatorio.length > 0" name="remove-circle" (click)="removeRecordatorio()" class="equi-icon-input equi-icon-delete"></ion-icon>
                    <ion-icon *ngIf="alerta.AlertaRecordatorio.length == 0" name="add-circle" (click)="viewRecordatorios()" class="equi-icon-input"></ion-icon>
                </ion-col>
            </ion-row>

            <ion-row class="border-bottom">
                <ion-col col-2 class="col-center">
                    <ion-icon name="ios-pricetag" class="equi-icon-input"></ion-icon>
                </ion-col>
                <ion-col col-8 class="equi-col-center equi-input-normal-text">
                    <span *ngIf="alerta.AlertaGrupo.length > 0">&nbsp;&nbsp;&nbsp;&nbsp;{{alerta.AlertaGrupo.length}} grupos(s)</span>
                    <span *ngIf="alerta.AlertaGrupo.length == 0" class="equi-text-edit">&nbsp;&nbsp;&nbsp;&nbsp;Etiquetar grupos(s)</span>
                </ion-col>
                <ion-col col-2 class="col-center">
                    <ion-icon name="add-circle" (click)="addGrupos()" class="equi-icon-input"></ion-icon>
                </ion-col>
            </ion-row>

            <ion-row class="border-bottom">
                <ion-col col-2 class="col-center">
                    <ion-icon name="ios-list-box" class="equi-icon-input"></ion-icon>
                </ion-col>
                <ion-col col-8 class="equi-col-center equi-input-normal-text">
                    <span *ngIf="alerta.AlertaCaballo.length > 0" class="equi-principal-color">&nbsp;&nbsp;&nbsp;&nbsp;{{alerta.AlertaCaballo.length}} caballo(s)</span>
                    <span *ngIf="alerta.AlertaCaballo.length == 0" class="equi-text-edit">&nbsp;&nbsp;&nbsp;&nbsp;Etiquetar caballo(s)</span>
                </ion-col>
                <ion-col col-2 class="col-center">
                    <ion-icon name="add-circle" (click)="addCaballos()" class="equi-icon-input"></ion-icon>
                </ion-col>
            </ion-row>

            <ion-row class="border-bottom">
                <ion-col col-2 class="col-center">
                    <ion-icon name="ios-pin" class="equi-icon-input"></ion-icon>
                </ion-col>
                <ion-col>
                    <ion-input style="padding-left: 5px;" name="Ubicacion" class="equi-input-normal-text" type="text" placeholder="Ubicación"
                        [(ngModel)]="alerta.Ubicacion"></ion-input>
                </ion-col>
            </ion-row>

            <ion-row class="border-bottom">
                <ion-col>
                    <ion-textarea name="Resultado" class="equi-input-normal-text" autoresize rows="3" placeholder="Resultado del evento" [(ngModel)]="alerta.Resultado"></ion-textarea>
                </ion-col>
            </ion-row>
        </ion-grid>
    </form>
</ion-content>